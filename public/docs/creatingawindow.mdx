# 윈도우 창 만들기

멋진 그래픽을 만들기 전에 우리가 해야할 첫번째 일은 OpenGL 컨텍스트와 그래픽을 그릴 애플리케이션 창(Window)를
만드는 것입니다. 하지만 이러한 작업들은 운영 체제마다 방식이 다르기 때문에 OpenGL은 일부러 이런 작업들에 개입하지 않습니다.
즉 창 생성, 컨텍스트 정의, 사용자 입력 처리 등은 개발자가 직접 구현해야 합니다.
다행히도, 우리가 필요한 기능을 제공해주는 라이브러리들이 많습니다. 일부는 OpenGL 전용으로 만들어진 것도 있습니다.
이러한 라이브러리들은 운영체제에 따라 다른 복잡한 작업들을 대신 처리해주고, 우리가 사용할 수 있는 윈도우 창과 OpenGL 컨텍스트를 제공해 줍니다.

대표적인 라이브러리로는

<List items={["GLUT","SDL","SFML","GLFW"]} ordered={true} />

등이 있습니다.

우리는 그중에서 **GLFW** 를 사용할 것입니다. 다른 라이브러리를 사용하셔도 괜찮습니다.
대부분의 설정은 GLFW의 것과 비슷할 것입니다.


## GLFW

GLFW는 C로 작성된 라이브러리 입니다. OpenGL만을 타겟으로 하였습니다.
GLFW는 화면에 그래픽을 렌더링 하는데 필요한 기본적인 필수 요소들을 제공합니다.
예를 들어, OpenGL 컨텍스트 생성, 윈도우 설정, 사용자 입력 처리 등을 지원하며
우리가 원하는 작업을 하기에는 충분합니다.

이번 장과 다음 장의 목표는 다음과 같습니다.

<List items={["GLFW를 정상적으로 설치 및 실행 하는 것", "OpenGL 컨텍스트를 제대로 생성하고", "간단한 윈도우를 화면에 띄워 테스트 할 수 있게 만드는 것"]} ordered={true} />

이 장에서는 GLFW 라이브러리를 **다운로드 → 빌드 → 프로젝트에 연결(linking)** 하는 과정을
단계별로 자세히 설명합니다.

우리는 현재 시점 기준으로 Microsoft Visual Studio 2019 IDE를 사용합니다.
(※ 최신 버전의 Visual Studio에서도 과정은 거의 동일합니다)

만약 여러분이 Visual Studio가 아닌 다른 IDE를 사용하거나,
더 오래된 버전을 사용하더라도 큰 차이는 없으니 걱정하지 않으셔도 됩니다.

## GLFW 빌드하기

GLFW는 공식 웹사이트의 <LinkBlock url={"https://www.glfw.org/download.html"} text="다운로드 웹사이트"/> 에서 받을 수 있습니다.
GLFW는 이미 Visual Studio 2012부터 2019까지 사용 가능한 미리 컴파일된 바이너리 파일과 헤더 파일을 제공합니다.

하지만 여기서는 더 완전히 배우기 위해 스스로 GLFW를 컴파일 해볼 것입니다. 이를 통해 오픈 소스 라이브러리를 직접 컴파일 하는 과정을 맛볼 수 있습니다. 모든 라이브러리가 빌드된 결과물을 제공하는 것은 아니기에 후에 도움이 될 것 입니다.

이제 **Source Package** 를 다운해 봅시다.

<Warning>
우리는 모든 라이브러리를 64비트 바이너리(실행 파일)로 빌드할 것이므로, 만약 GLFW의 미리 컴파일된 바이너리를 사용할 경우에도 반드시 64비트용으로 다운로드해야 합니다.
</Warning>

Source Package 를 다운로드 한 후에는 압축을 풀고 그 안의 내용을 열어보세요
우리가 주의깊게 봐야할 것은 몇가지 핵심 파일입니다.

<List items={["컴파일 결과로 생성된 라이브러리 파일", "include 폴더 (헤더 파일들이 들어있음)"]} ordered={true}/>


소스 코드로 부터 직접 라이브러리를 컴파일하면, 해당 라이브러리가 내 CPU와 운영체제에 최적화된 형태로 만들어진 장점이 있습니다.
이는 미리 컴파일된 바이너리들이 제공하지 못하는 이점입니다.

하지만 소스 코드를 오픈소스로 제공할 경우 문제점은, 모든 개발자가 같은 IDE나 빌드 시스템을
사용하는 것이 아니기에 소스코드의 프로젝트 파일 `(.sin, .vcxproj 등)` 이 다른 사람의 개발환경에는 호환되지 않을 수 있습니다. (ex, Mac의 경우)

이럴 경우, 사람들은 각각 자신이 사용 하는 IDE나 빌드 시스템에 맞게 일일이 .c, .cpp ,.h 파일들을 직접 프로젝트로
구성해야 한다는 번거로움이 있습니다.

바로 이러한 문제를 해결하기 위해 등장한 도구가 바로 CMake입니다.

CMake는 다양한 플랫폼과 IDE에서 사용할 수 있도록,
공통된 방식으로 빌드 설정을 정의하고,
그 설정을 기반으로 각 IDE/플랫폼에 맞는 프로젝트 파일을 자동으로 생성해줍니다


## CMake

CMake는 유저의 입맛에 맞게 project/solution을 생성할 수 있는 툴 입니다. (예. Visual studio, Code::Blocks, Eclips) 미리 정의된 CMake 스크립트를 사용하여 
여러 소스 코드 파일에서 생성해줍니다. 이를 통해 우리는 GLFW의 소스 패키지로부터 Visual Studio 프로젝트 파일을 생성할 수 있고, 그 프로젝트 파일을 이용해 라이브러리를 컴파일 할수 있습니다. 

먼저 CMake를 다운로드하고 설치해야합니다. CMake는 자체적인 <LinkBlock url={"https://cmake.org/download/"} text="CMake 다운로드 웹사이트"/> 에서 받을 수 있습니다. 

CMake를 설치한 후에는 command line 혹은 GUI를 통해 실행할 수 있습니다. 복잡하게 하지 않기 위해 여기서는 GUI를 사용하도록 합시다. 

CMake는 소스코드 폴더와 바이너리 빌드용 폴더를 필요로 합니다. 
- 소스 코드 폴더 : 다운로드한 GLFW 소스 패키지의 루트 폴더를 선택
- 빌드 폴더 : build라는 새 폴더를 만들어 그 폴더를 선택합니다. 

![CMake](./images/getting-started/cmake.png)

소스코더 폴더와 빌드 폴더가 세팅된 후에는 **Configure** 버튼을 클릭해서 CMake가 필요한 설정과 소스 코드들을 읽을 수 있도록 합니다. 
그 후 우리는 프로젝트의 생성자를 선택해야합니다. 현재 Visual Studio 2019를 사용하고 있으니 Visual Studio 16 옵션을 선택할 것입니다. 
(Visual Studio 2019는 Visual Studio 16으로도 알려져 있습니다.) CMake는 그 후 가능한 빌드 옵션들을 보여줍니다. 
기본값은 그대로 두고 다시 **Configure** 버튼을 눌러 설정을 저장하면 됩니다. 
설정이 완료되면 **Generate** 버튼을 눌러 프로젝트 파일을 빌드 폴더 안에 생성합니다. 

## 컴파일 (Compilation)

빌드 폴더 안에는 이제 **GLFW.sln** 이라는 파일이 생성되어 있을 것이고, 이를 Visual Studio 2019 (혹은 2022) 로 열 수 있습니다. 
CMake가 이미 적절한 설정을 포함한 프로젝트 파일을 생성했기 때문에, 우리는 단순히 솔루션을 빌드 하기만 하면 됩니다. 

